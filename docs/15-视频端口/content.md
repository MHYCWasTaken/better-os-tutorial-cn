---
layout: post
title: 15. Content
nav_order: 99
parent: 15-视频端口
---

*您可能需要提前搜索的概念：I/O端口*

> [下载](https://mhyc.eu.org/better-os-tutorial-cn/docs/15-视频端口/Lesson15.zip)

**目标：学习如何使用VGA卡数据端口**


我们将使用C通过I/O寄存器和端口与设备通信。


打开 `drivers/ports.c` 。并检查内联c汇编程序语法。它有一些区别，比如源操作数和目标操作数的顺序，以及为操作数分配变量的有趣语法。


理解概念后，打开 `kernel/kernel.c` 代表用法示例。


在本例中，我们将检查映射屏幕光标位置的I/O端口。具体来说，我们将查询值为 `14` 的端口 `0x3d4`，以请求光标位置的高位字节，并使用相同的端口 `15` 来请求低位字节。


查询此端口时，它将结果保存在端口 `0x3d5` 中


不要错过使用 `gdb` 检查C变量值的机会，因为我们仍然无法在屏幕上打印它们。为此，设置断点

对于特定行，`breakpoint kernel.c: 21`并使用`print`命令检查变量。我们现在投入了一些时间，你不高兴吗

编译交叉编译的gdb？;)

最后，我们将使用查询的光标位置在该位置写入字符。